---
title: Qt 信号和槽
date: 2022-08-25 18:15:39
categories: [Qt]
tags: [Qt]
---
## 信号和槽
当我们需要一个界面通知另一个界面时，可以采用信号和槽机制。通过链接信号和槽，当一个界面发送信号时，链接该信号的槽会被响应，从而达到消息传递的目的。
所以我们先创建一个Qapplication Widgets 应用。Creator会为我们生成mainwindow类和其界面。我们在界面添加一个按钮，按钮的名字叫showChildButton, 按钮显示的文字改为“显示子界面”。
同时为该界面添加一个label，显示的文字修改为“这是主界面”
<!--more-->
![https://cdn.llfc.club/EBD5635CE2FA.png](https://cdn.llfc.club/EBD5635CE2FA.png)
现在实现点击按钮，在控制台打印一条日志  "show child dialog "
我们先在MainWindow的构造函数中添加信号和槽的链接逻辑
``` cpp
connect(ui->showChildButton, SIGNAL(clicked(bool)), this, SLOT(showChildDialog()));
```
然后我们为MainWindow添加showChildDialog槽函数，槽函数需要用slots声明，我们这里在mainwindow.h里用public slots的方式声明槽函数。
``` cpp
public slots:
    void showChildDialog();
```
接下来去mainwindow.cpp中完成该函数的实现，可以在头文件中右键该函数，在弹出菜单里选择Refactor, 再选择在mainwindow.cpp中添加实现。
![https://cdn.llfc.club/645C3ED1042D.png](https://cdn.llfc.club/645C3ED1042D.png)
也可以将鼠标光标放置在这个函数上，按alt+enter，弹出菜单选择在mainwindow.cpp中添加实现。这两种方式都是快捷添加，也可以直接去mainwindow.cpp里实现。
``` cpp
void MainWindow::showChildDialog()
{
    qDebug() << "show child dialog " << endl;
}
```
运行项目后点击按钮，就可以看到控制台弹出show child dialog日志。

